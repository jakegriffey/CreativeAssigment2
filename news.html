<!DOCTYPE html>
<html>
    <head>
        <title>Creative Project</title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
        <script src="http://code.jquery.com/jquery-3.2.1.min.js"></script>
        
        <script>
            $(document).ready(function() 
            {
                console.log( "ready!" );
                
                var tableCode = "<table style=\"width:100%\">";
                var counter = 1;
                for (var i = 1; i < 6; i++)
                {
                    tableCode += "<tr>";
                    for (var j = 1; j < 5; j++)
                    {
                        tableCode += "<td>";
                        tableCode += "<div style=\"background-color:lightblue\" id=\"box" + counter + "\">";
                        tableCode += "<h3>box" + counter + "</h3>";
                        tableCode += "<p>This is a paragraph.</p>"
                        tableCode += "</div>"
                        tableCode += "</td>"
                        
                        counter++;
                    }
                    tableCode += "</tr>";
                }
                tableCode += "</table>"
                $("#myTable").html(tableCode);
                
                $("#searchButton").click(function(e) 
                {
                    var value = $("#searchBox").val(); 
                    var fullDate = new Date();
                    var currentDate = fullDate.getFullYear() + '-' + (fullDate.getUTCMonth() + 1) + '-' + fullDate.getDate();
                    $.ajax({
                        url: "https://newsapi.org/v2/everything?q=" + value + "&from=" + currentDate + "&sortBy=popularity&apikey=eefb3b6580ca4dc1b9dc45b5262acd40",
                        //url: "https://www.googleapis.com/youtube/v3/search?part=snippet&q=Venom&maxResults=5&order=date&type=video&safeSearch=strict&key=AIzaSyBAg223tUmKQ9qctm6AzBFRtPsXfkZAPXY",
                        dataType: "json",
                        success: function(data) {
                            let articles = data.articles;
                            for(let i = 0; i < articles.length; ++i) {
                                let article = articles[i];
                                let id = "#box" + (i+1);
                                let html = "<img src = \"" + article.urlToImage + "\" height = \"150\"/>";
                                html += "<br>";
                                html += "<a href = \"" + article.url + "\">" + article.title + "</a>";
                                $(id).html(html);
                                
                            }
                            console.log(data)
                        },
                        error: function(data) {
                            console.log(data)
                            console.log("Error")
                        }
                    });
                    
                    $.ajax({
                        //url: "https://newsapi.org/v2/everything?q=" + value + "&from=" + currentDate + "&sortBy=popularity&apikey=eefb3b6580ca4dc1b9dc45b5262acd40",
                        url: "https://www.googleapis.com/youtube/v3/search?part=snippet&q=" + value + "&maxResults=5&order=date&type=video&videoEmbeddable=true&safeSearch=strict&key=AIzaSyBAg223tUmKQ9qctm6AzBFRtPsXfkZAPXY",
                        dataType: "json",
                        success: function(data) {
                            let items = data.items;
                            var videoList = "<ul style = \"list-style-type:none\">"
                            for(let i = 0; i < items.length; ++i) {
                                videoList += "<li>";
                                videoList += "<iframe width = \"640\" height = \"360\" src = \"http://www.youtube.com/embed/" + items[i].id.videoId + "\" />";
                                videoList += "</li>";
                            }
                            
                            $("#youtubeList").html(videoList);
                        },
                        error: function(data) {
                            console.log(data)
                            console.log("Error")
                        }
                    });
                    
                    
                    console.log(value);
                    e.preventDefault();
                });
            });
            
            
        </script>
    </head>
    
    <body>
        <h1>
            News
        </h1>
        
        Search Anything You Like!
        <input type = "text" id = "searchBox" value = ""><br>
        <input id="searchButton" type="submit" value="Submit">
        
        <div id='myTable' width = 100%>
        </div>
        
        <div id = "youtubeList">
        </div>
    </body>
</html>